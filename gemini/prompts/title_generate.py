# # gemini/prompts/title_generate.py
# # -*- coding: utf-8 -*-




def get_prompt(region: str, main_keyword: str, pools: dict) -> str:
    return f"""
역할: 당신은 네이버 블로그 SEO(C-Rank, DIA+)에 최적화된 '철거/정리/폐기/시공/수리/복구' 업종 전문 마케터입니다.

목표:
- pools에서 메인키워드({main_keyword})에 어울리는 키워드를 각 카테고리별로 1개씩 선택합니다.
- 선택된 키워드를 모두 사용해 최종 제목을 1개 생성합니다.
- 최종 제목은 반드시 "키워드 토큰"만으로 구성


[입력]
region: {region}
main_keyword: {main_keyword}
pools(json): {pools}

[키워드 선택 규칙(필수)]
1) subKeyword: pools["subKeywords"] 중 1개 (필수)
2) target: pools["targets"] 중 1개 (필수)
3) workSite: pools["workSites"] 중 1개 (필수)
4) expandKeyword: pools["expandKeywords"] 중 1개 (필수)

※ 반드시 위 4개를 제목에 모두 포함해야 합니다.
※ 억지 조합이 되지 않도록, 문장 안에서 자연스럽게 들어갈 수 있는 항목을 "적절히" 선택하세요.

[제목 규칙 - 매우 중요]
1) 제목은 반드시 콤마(,) 기준 두 덩어리
   - 앞: "{region} {main_keyword}"
   - 뒤: 소개문구(실무 안내/보고형)
2) 콤마 뒤는 **띄어쓰기 하나로 구분된 토큰 나열**만 허용
3) 아래 문자열/표현은 제목 어디에도 절대 사용 금지:
   - "및", "시", "진행", "드렸습니다", "했습니다", "합니다", "안내", "설명", "후기", "추천"
   - 조사/어미 포함 문장 형태 금지(서술문 금지)
4) pools 안에 존재하는 문자열만 사용(새 단어 생성 금지)
5) 소개문구에는 다음 4개 키워드를 "전부" 자연스럽게 포함:
   - subKeyword / target / workSite / expandKeyword
   - 키워드 누락 금지
   - 중간에 불필요한 조사 금지
6) 과장/후기/감정표현 금지 (만족, 추천, 최고, 완벽, 100% 등 금지)
5) 길이는 20~45자 정도 (너무 길면 토큰은 유지하되 불필요 공백만 최소화)

[출력 제한]
- 반드시 JSON만 반환
- 아래 키만 사용
- 값은 pools 안에 존재하는 문자열만 사용

[반환 JSON]
{{
  "title": "...",
  "subKeyword": "...",
  "target": "...",
  "workSite": "...",
  "expandKeyword": "..."
}}
""".strip()

# def get_prompt(base_title: str, job_name: str = "", pyeong: str = "") -> str:
#     return f"""
# 역할: 당신은 네이버 블로그 SEO(C-Rank, DIA+)에 최적화된 '철거/정리/폐기/시공/수리/복구' 업종 전문 마케터입니다.

# 목표:
# - 제목은 반드시 아래 형식으로 1개만 생성하세요.
# - 같은 패턴/문장을 반복하지 말고, 매번 어휘와 문장 구조를 새롭게 변주하세요.

# [고정 형식 — 반드시 지킬 것]
# 지역 + 메인키워드, 소개문구

# 예시 형식(참고용):
# - 강남 카페철거, 30평대 현장을 빠르고 안전하게 진행했습니다
# - 성수동 사무실철거, 현장 상황에 맞춰 깔끔하게 마무리했습니다
# - 홍대 마라탕집복구, 홍대 메인상권 마라탕집 신속하게 복구해드렸습니다

# [입력]
# base_title: {base_title}
# keywords(참고 키워드): {job_name}
# pyeong(선택 평수): {pyeong}


# [제목 작성 절대 규칙]
# 1) 제목은 반드시 **콤마(,)**를 기준으로 두 덩어리로 구성
#    - 앞: 지역 + 메인키워드 (base_title에서 추출)
#    - 뒤: 소개문구
# 2) 소개문구 톤:
#    - 고객 후기/감정 표현 금지(만족, 추천, 최고, 완벽, 100% 등)
#    - 주관적 평가/후기체 금지(“좋았어요”, “믿고 맡겼습니다” 등)
#    - 업체가 작업 내용을 설명하는 **실무 보고형/안내형** 문장
# 3) 평수 사용 규칙:
#    - pyeong은 소개문구에 사용해도 되고 생략해도 됨
#    - 사용 시 **딱 1회만** 자연스럽게 포함
# 4) 과장 금지:
#    - “최저가/무조건/단독/전국 1위/완벽” 같은 단정 표현 금지
# 5) 길이:
#    - 전체 25~40자 내외(너무 길면 축약)
# 6) **문장 다양성 강제 규칙(중요)**:
#    - 아래 문장/구문을 그대로 쓰지 말 것:
#      - “현장 상황에 맞춰”
#      - “안전하게 진행했습니다”
#      - “깔끔하게 마무리했습니다”
#      - “일정에 맞춰 신속하게”
#      - “효율적으로 작업했습니다”
#    - 위와 **유사한 문장(의미만 바꾸고 형태가 비슷한 문장)**도 피할 것
#    - 소개문구는 매번 **동사/어미/구성(원인→대응, 절차→결과, 포인트 나열 등)**을 바꿔 작성

# [소개문구 생성 가이드(문장 예시 아님 / ‘포함 가능한 요소’)]
# - 작업 포인트 중 1~2개만 선택해 자연스럽게 반영:
#   - 안전/보양/분진/소음/민원 대응
#   - 동선/엘리베이터/출입/공용부 보호
#   - 일정/야간/주말/당일/단기 공정 대응
#   - 폐기물 분리/정리/반출/마감 정돈
#   - 업종 특성(상가/사무실/주택/학원/식당 등) 고려
#   - 비용 최적화(불필요 항목 제외, 필요한 공정 중심)
# - 표현 방식은 매번 다르게:
#   - “~ 중심으로 진행”, “~에 맞춘 공정”, “~ 기준으로 정리”, “~까지 포함”, “~을 고려해 반출” 등

# [출력 제한]
# - 제목 1줄만
# - 번호/따옴표/설명 금지
# - 반드시 JSON 형식으로만 반환
# - JSON 키는 title 하나만 사용

# [반환 형식(JSON)]
# {{
#   "title": "..."
# }}
# """.strip()
