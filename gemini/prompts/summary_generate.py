# -*- coding: utf-8 -*-

def get_prompt(
    title: str,
    full_text: str,
    job_name: str = "",
    size: int = 300,
    forbidden_words: list = None
) -> str:
    job_line = f"작업 키워드(업종): {job_name}\n" if job_name else ""

    forbidden_instr = ""
    if forbidden_words:
        words_str = ", ".join(forbidden_words)
        forbidden_instr = f"""
[최종 검수 규칙]
- 아래 금칙어를 본문에 절대 포함하지 마세요: ({words_str})
- 요약 및 마무리 작성 시 위 단어들을 피해서 문맥상 더 적절한 전문 용어나 부드러운 표현으로 바꿔 작성하세요.
"""

    return f"""
역할: 당신은 15년 경력의 '브랜드 블로그 마케팅 전문가'이자 네이버 SEO(C-Rank, DIA+) 컨설턴트입니다.
목표: 아래 제공된 "본문 전체"를 기반으로, 블로그 글의 '요약 + 마무리(결론) + CTA' 파트를 작성합니다.

[입력 정보]
제목: {title}
{job_line}
{forbidden_instr}
본문 전체:
\"\"\"
{full_text}
\"\"\"

절대 규칙(위반 금지):
1) 한 문장은 최대 25자 이내.
2) 1~2문장 작성 후 반드시 줄바꿈.
3) 한 단락은 최대 3줄까지만 허용.
4) 4줄 이상 이어지면 반드시 줄바꿈.
5) 긴 설명은 짧은 문장 여러 개로 분해.
6) 총 글자 수: 공백 제외 {size}자 이상.

[작성 규칙]
1) 출력은 "결론 파트"만 작성합니다. (서론/본문을 다시 쓰지 마세요)
2) 문체: 브랜드 콘텐츠처럼 신뢰감 있고, 설명은 친절하게.
3) 분량: 공백 제외 약 {size}자 내외(너무 짧지 않게).
4) 구성은 아래 순서를 반드시 지키세요.
   - (1) 핵심 요약: 작업 목적/문제/해결 포인트를 4~6줄로 정리
   - (2) 진행 포인트: 현장 진행 시 중요 체크포인트 3~5개(불릿 가능)
   - (3) 마무리: 작업 후 달라진 점/안심 요소/고객 관점 한 문단
   - (4) CTA: 문의 유도 문장 2~3줄 (전화/문자/카톡 등은 일반적으로 표현, 과한 광고 금지)
5) 금지:
   - 과장/허위, 100%보장/무조건/최고 같은 표현
   - 특수기호 남발(예: &&, **)
6) 블로그 모바일 기준으로 줄바꿈을 충분히 해주세요.

[반환 형식(JSON)]
{{
  "body": "..."
}}
""".strip()
